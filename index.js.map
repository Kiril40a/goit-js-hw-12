{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nexport async function getImagesByQuery(query, page) {\n    try {\n        const response = await axios.get('https://pixabay.com/api/', {\n            params: {\n                key: '49815618-f39b281f22944c1de1a6cd368',\n                q: query,\n                image_type: 'photo',\n                orientation: 'horizontal',\n                safesearch: 'true',\n                page: page,\n                per_page: 15\n            }\n        });\n        return response.data;\n    } catch (error) {\n        console.error('Error fetching images:', error);\n        return [];\n    }\n}\n","import SimpleLightbox from 'simplelightbox';\n\nlet galleryBox = document.querySelector(\".gallery\");\nlet loaderContainer = document.querySelector(\".loader-container\");\nlet moreContainer = document.querySelector(\".more-container\");\n\nlet gallery = new SimpleLightbox('.gallery a', {\n    captionDelay: 250,\n    captions: true,\n    captionSelector: 'img',\n    captionsData: \"alt\",\n    captionPosition: 'bottom',\n    animated: true\n    });\n\nexport function createGallery(images) {\n    const fragment = document.createDocumentFragment();\n\n    images.forEach(elem => {\n        const li = document.createElement('li');\n        li.className = 'gallery-item';\n\n        const link = document.createElement('a');\n        link.className = 'gallery-link';\n        link.href = elem.largeImageURL;\n        link.addEventListener('click', e => e.preventDefault());\n\n        const img = document.createElement('img');\n        img.className = 'gallery-image';\n        img.src = elem.webformatURL;\n        img.alt = elem.tags;\n\n        const descList = document.createElement('ul');\n        descList.className = 'gallery-item-desc';\n\n        const descriptions = [\n            { label: 'Likes', value: elem.likes },\n            { label: 'Views', value: elem.views },\n            { label: 'Comments', value: elem.comments },\n            { label: 'Downloads', value: elem.downloads }\n        ];\n\n        descriptions.forEach(({ label, value }) => {\n            const descItem = document.createElement('li');\n            descItem.className = 'gallery-item-desc-li';\n            descItem.innerHTML = `<span>${label}: </span><span>${value}</span>`;\n            descList.append(descItem);\n        });\n\n        link.append(img);\n        li.append(link, descList);\n        fragment.append(li);\n    });\n\n    galleryBox.append(fragment);\n    gallery.refresh();\n}\nexport function clearGallery() {\n    galleryBox.innerHTML = '';\n}\nexport function showLoader() {\n    loaderContainer.classList.remove('hidden');\n}\nexport function hideLoader() {\n    loaderContainer.classList.add('hidden');\n}\nexport function showLoadMoreButton() {\n    moreContainer.classList.remove('hidden');\n}\nexport function hideLoadMoreButton() {\n    moreContainer.classList.add('hidden');\n}","import { getImagesByQuery } from \"./js/pixabay-api\";\nimport { createGallery, clearGallery, showLoader, hideLoader, showLoadMoreButton, hideLoadMoreButton } from \"./js/render-functions\";\nimport iziToast from 'izitoast';\n\nconst form = document.querySelector(\".form\");\nconst searchInput = document.querySelector('input[name=search-text]');\nconst loadMoreButton = document.querySelector(\".load-more\");\nlet searchWord = '';\nlet totalHits = 0;\nlet page = 0;\nlet searchTimeout;\n\nconst toastConfig = {\n  position: 'topRight',\n  backgroundColor: 'rgba(255, 0, 0, 0.6)',\n  timeout: 3000,\n};\n\nconst showError = (message) => {\n  iziToast.show({\n    ...toastConfig,\n    message,\n  });\n};\n\nform.addEventListener(\"submit\", async (e) => {\n  e.preventDefault();\n\n  clearTimeout(searchTimeout);\n\n  searchWord = searchInput.value.trim();\n  if (!searchWord) {\n    hideLoader();\n    showError('The search field cannot be empty');\n    return;\n  }\n\n  searchTimeout = setTimeout(async () => {\n    try {\n      clearGallery();\n      hideLoadMoreButton();\n      showLoader();\n      page = 1;\n\n      const data = await getImagesByQuery(searchWord, page);\n\n      if (!data.hits || data.hits.length === 0) {\n        showError('Sorry, there are no images matching your search query. Please try again!');\n      } else {\n        createGallery(data.hits);\n        totalHits = data.totalHits;\n      }\n    } catch (error) {\n      console.error('Search error:', error);\n      showError('An error occurred while fetching images');\n    } finally {\n      hideLoader();\n      if (totalHits > 15) {\n        showLoadMoreButton();\n      } else if (totalHits > 0) {\n        showError(\"We're sorry, but you've reached the end of search results.\");\n      }\n    }\n  }, 300);\n});\n\nloadMoreButton.addEventListener(\"click\", async (e) => {\n  e.preventDefault();\n  showLoader();\n  hideLoadMoreButton();\n  page += 1;\n\n  try {\n    const data = await getImagesByQuery(searchWord, page);\n\n    if (!data.hits || data.hits.length === 0) {\n      showError('Sorry, there are no images matching your search query. Please try again!');\n    } else {\n      createGallery(data.hits);\n    }\n\n    if (totalHits <= page * 15) {\n      showError(\"We're sorry, but you've reached the end of search results.\");\n    } else {\n      showLoadMoreButton();\n    }\n\n    const heightCard = document.querySelector('.gallery-item')?.getBoundingClientRect().height || 0;\n    window.scrollBy({\n      top: heightCard * 2,\n      behavior: \"smooth\",\n    });\n  } catch (error) {\n    console.error('Load more error:', error);\n    showError('An error occurred while fetching more images');\n  } finally {\n    hideLoader();\n  }\n});"],"names":["getImagesByQuery","query","page","axios","error","galleryBox","loaderContainer","moreContainer","gallery","SimpleLightbox","createGallery","images","fragment","elem","li","link","e","img","descList","label","value","descItem","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","form","searchInput","loadMoreButton","searchWord","totalHits","searchTimeout","toastConfig","showError","message","iziToast","data","heightCard","_a"],"mappings":"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"}