{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nexport async function getImagesByQuery(query, page) {\n    try {\n        const response = await axios.get('https://pixabay.com/api/', {\n            params: {\n                key: '49815618-f39b281f22944c1de1a6cd368',\n                q: query,\n                image_type: 'photo',\n                orientation: 'horizontal',\n                safesearch: 'true',\n                page: page,\n                per_page: 15\n            }\n        });\n        return response.data;\n    } catch (error) {\n        console.error('Error fetching images:', error);\n        return [];\n    }\n}\n","import SimpleLightbox from 'simplelightbox';\n\nlet galleryBox = document.querySelector(\".gallery\");\nlet loaderContainer = document.querySelector(\".loader-container\");\nlet moreContainer = document.querySelector(\".more-container\");\nexport function createGallery(images) {\n    let liElements = [];\n    images.forEach(elem => {\n        let li = document.createElement('li');\n        li.classList = 'gallery-item';\n\n        let link = document.createElement('a');\n        link.classList = 'gallery-link';\n        link.href = elem.largeImageURL;\n        link.addEventListener(\"click\", (e) => {\n            e.preventDefault();\n        })\n        let descList = document.createElement('ul');\n        descList.classList = 'gallery-item-desc';\n        let descLike = document.createElement('li');\n        descLike.innerHTML = `<span>Likes: </span><span>${elem.likes}</span>`\n        let descView = document.createElement('li');\n        descView.innerHTML = `<span>Views: </span><span>${elem.views}</span>`\n        let descCom = document.createElement('li');\n        descCom.innerHTML = `<span>Comments: </span><span>${elem.comments}</span>`\n        let descDown = document.createElement('li');\n        descDown.innerHTML = `<span>Downloads: </span><span>${elem.downloads}</span>`\n        \n        descLike.classList = 'gallery-item-desc-li';\n        descView.classList = 'gallery-item-desc-li';\n        descCom.classList = 'gallery-item-desc-li';\n        descDown.classList = 'gallery-item-desc-li';\n        \n\n\n        let img = document.createElement('img');\n        img.classList = 'gallery-image';\n        img.src = elem.webformatURL;\n        img.alt = elem.tags;\n\n        link.append(img);\n        li.append(link);\n        descList.append(descLike);\n        descList.append(descView);\n        descList.append(descCom);\n        descList.append(descDown);\n        li.append(descList);\n        liElements.push(li)\n    })\n\n    galleryBox.append(...liElements);\n    let gallery = new SimpleLightbox('.gallery a', {\n    captionDelay: 250,\n    captions: true,\n    captionSelector: 'img',\n    captionsData: \"alt\",\n    captionPosition: 'bottom',\n    animated: true\n    });\n    gallery.refresh();\n    \n}\nexport function clearGallery() {\n    galleryBox.innerHTML = '';\n}\nexport function showLoader() {\n    loaderContainer.classList.remove('hidden');\n}\nexport function hideLoader() {\n    loaderContainer.classList.add('hidden');\n}\nexport function showLoadMoreButton() {\n    moreContainer.classList.remove('hidden');\n}\nexport function hideLoadMoreButton() {\n    moreContainer.classList.add('hidden');\n}","import { getImagesByQuery } from \"./js/pixabay-api\";\nimport { createGallery, clearGallery, showLoader, hideLoader, showLoadMoreButton, hideLoadMoreButton } from \"./js/render-functions\";\nimport iziToast from 'izitoast';\n\nconst searchinput = document.querySelector('input[name=search-text]');\nlet searchWord;\nlet totalHits;\nlet page = 0;\ndocument.querySelector(\".form\").addEventListener(\"submit\", async (e) => {\n    e.preventDefault();\n    showLoader();\n    clearGallery();\n    hideLoadMoreButton()\n    \n    page = 1;\n    searchWord = searchinput.value;\n    if (searchWord !== \"\") {\n        try {\n            const data = await getImagesByQuery(searchWord, page);\n            if (data.hits.length === 0) {\n                iziToast.show({\n                    message: 'Sorry, there are no images matching your search query. Please try again!',\n                    position: 'topRight',\n                    backgroundColor: 'rgba(255, 0, 0, .6)'\n                });\n            } else {\n                createGallery(data.hits);\n            }\n            totalHits = data.totalHits;\n            \n        } catch (error) {\n            console.error('Error: ', error);\n        } finally {\n            hideLoader();\n            if (totalHits > 15) {\n                showLoadMoreButton();\n            } else {\n                iziToast.show({\n                    message: \"We're sorry, but you've reached the end of search results.\",\n                    position: 'topRight',\n                    backgroundColor: 'rgba(255, 0, 0, .6)'\n                });\n            }\n        }\n    }\n});\ndocument.querySelector(\".load-more\").addEventListener(\"click\", async (e) => {\n    e.preventDefault();\n    showLoader();\n    hideLoadMoreButton()\n\n    page +=1;\n    try {\n            const data = await getImagesByQuery(searchWord, page);\n            if (data.hits.length === 0) {\n                iziToast.show({\n                    message: 'Sorry, there are no images matching your search query. Please try again!',\n                    position: 'topRight',\n                    backgroundColor: 'rgba(255, 0, 0, .6)'\n                });\n            } else {\n                createGallery(data.hits);\n        }\n        if (totalHits <= (page) * 15) {\n            hideLoadMoreButton();\n            iziToast.show({\n                    message: \"We're sorry, but you've reached the end of search results.\",\n                    position: 'topRight',\n                    backgroundColor: 'rgba(255, 0, 0, .6)'\n                });\n        } else {\n            showLoadMoreButton();\n        }\n\n        let heightCard = document.querySelector('.gallery-item').getBoundingClientRect().height;\n        window.scrollBy({\n            top: heightCard * 2,\n            behavior: \"smooth\",\n        });\n\n        } catch (error) {\n            console.error('Error: ', error);\n        } finally {\n            hideLoader();\n    }\n})"],"names":["getImagesByQuery","query","page","axios","error","galleryBox","loaderContainer","moreContainer","createGallery","images","liElements","elem","li","link","e","descList","descLike","descView","descCom","descDown","img","SimpleLightbox","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","searchinput","searchWord","totalHits","data","iziToast","heightCard"],"mappings":"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"}